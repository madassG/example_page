$(document).ready(function(){$(".balance__promocode").submit(function(o){o.preventDefault();var a=$(this),e=a.find(".balance__promocode-input").val();a.hasClass("balance__promocode_has-no-promo")?$.ajax({method:"post",url:"ajax-promocode-activate/",data:{promocode:e},headers:{"X-CSRFToken":$("input[name=csrfmiddlewaretoken]").val()},success:function(o){"bad"===o.result?a.addClass("balance__promocode_error"):"good"===o.result&&(a.removeClass("balance__promocode_error"),a.removeClass("balance__promocode_has-no-promo"),a.addClass("balance__promocode_has-promo"),a.find(".balance__promocode-success span").html(o.bonus))}}):a.hasClass("balance__promocode_has-promo")&&$.ajax({method:"post",url:"ajax-promocode-delete/",data:{},headers:{"X-CSRFToken":$("input[name=csrfmiddlewaretoken]").val()},success:function(){a.removeClass("balance__promocode_has-promo"),a.addClass("balance__promocode_has-no-promo"),a.find(".balance__promocode-input").val("").prop("readonly",!1),a.find(".balance__promocode-success span").val("")}})}),$.ajax({url:"ajax-promocode-check/",method:"post",headers:{"X-CSRFToken":$("input[name=csrfmiddlewaretoken]").val()},data:{},success:function(o){var a;o.have&&((a=$(".balance__promocode")).addClass("balance__promocode_has-promo"),a.removeClass("balance__promocode_has-no-promo"),a.find(".balance__promocode-input").val(o.promocode).attr("readonly","readonly"),a.find(".balance__promocode-success span").html(o.bonus))}})});
